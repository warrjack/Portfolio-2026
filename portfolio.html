<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>All Projects — Portfolio</title>
    <meta name="description" content="All projects from my portfolio.">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
      :root { color-scheme: dark; }
      body { font-family: "Space Grotesk", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
      html { scroll-behavior: smooth; }
      ::-webkit-scrollbar { width: 8px; }
      ::-webkit-scrollbar-thumb { background: #27272a; border-radius: 999px; }
      .fade-enter { opacity: 0; }
      .fade-enter-active { opacity: 1; transition: opacity 500ms ease; }
      .grid-item-fade {
        opacity: 0;
        transform: translateY(20px);
        animation: fadeInUp 0.6s ease-out forwards;
      }
      @keyframes fadeInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body class="bg-[#0b0d10] text-slate-200 selection:bg-[#F4BF80]/20 antialiased overflow-x-hidden">
    <!-- Accessibility: skip link -->
    <a class="sr-only focus:not-sr-only absolute left-4 top-4 rounded px-2 py-1 bg-black/60 text-white text-sm" href="#main-content">Skip to content</a>

    <!-- Main Content -->
    <main id="main-content" class="fade-enter-active min-h-screen w-full overflow-y-auto bg-[#0b0d10] transition-opacity duration-300">
      <div class="sticky top-0 z-10 border-b border-white/5 bg-[#0b0d10]/95 backdrop-blur supports-[backdrop-filter]:bg-[#0b0d10]/80">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
          <div class="flex h-16 items-center justify-between">
            <div class="flex items-center gap-4">
              <a href="index.html" class="group flex items-center justify-center h-8 w-8 rounded-full border border-white/10 bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition">
                <i data-lucide="x" class="h-4 w-4"></i>
              </a>
              <h2 class="text-sm font-semibold text-white tracking-tight">All Projects <span class="ml-2 text-xs font-normal text-slate-500">25 items</span></h2>
            </div>
            <div class="hidden sm:flex items-center gap-2">
              <div class="h-2 w-2 rounded-full bg-emerald-500"></div>
              <span class="text-xs text-slate-400">System Online</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
        <!-- Recent Projects -->
        <div class="mb-8">
          <h2 class="text-2xl font-bold text-white">Recent Projects</h2>
        </div>

        <div id="all-projects-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>

        <!-- Labs Section -->
        <div class="mt-16">
          <h2 class="text-2xl font-bold text-white mb-6">Labs</h2>
          <div id="labs-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>
        </div>
      </div>
    </main>

    <script>
      lucide.createIcons();

      // Control which projects are public and their display order
      // Add or remove project titles from this array to show/hide them
      // The order in this array determines the order they appear on the portfolio page
      const publicProjects = [
        "Lorcana Card Management",
        "Finance Planner",
        "Smart Path",
        "Ant Simulation",
        "Drone Simulator",
        "Typing Analyzer",
        "Outfit Picker",
        "Evvents (24)",
        "InfoSwap"

        //"Quizlet Remake",
        //"Image Tracer",
        //"Wordle Solver",
        //"Outfit Picker",
        //"Number Game",
        //"JSON Converter",
        //"Rock, Paper, Scissors Free-For-All",
        //"Instagram Bot Farm",
        //"Comet Fall",
        //"Colour Removal Tool",
        //"Task Manager",
        //"Mekorama Prototype",
        //"Good Ol' Hockey Game"
        //"InfoSwap",
        //"USB Password Keeper",
        
        //"Evvents (24)"
      ];
      const labProjects = [
        "Quizlet Remake",
        "Image Tracer",
        "Colour Removal Tool",
        "Wordle Solver",
        "Task Manager",
        "Number Game",
        "Rock, Paper, Scissors Free-For-All",
      ];

      // Map project titles to external URLs — add more entries here
      const externalLinks = {
        'Instagram Bot Farm': 'https://github.com/warrjack/Instagram-Bot-Farm',
        'Image Tracer': 'https://warrjack.github.io/Image-Tracer/',
      };

      // Helper function to create a project card
      function createProjectCard(project, originalIndex, displayIndex) {
        const card = document.createElement('div');
        const hasStatus = project.status && (project.status === "Coming Soon" || project.status === "Importing Soon");
        
        // Disable hover and pointer for status cards
        const cardClass = hasStatus 
          ? "group relative rounded-xl border border-white/10 bg-white/5 overflow-hidden transition-all grid-item-fade"
          : "group relative rounded-xl border border-white/10 bg-white/5 overflow-hidden hover:border-white/20 transition-all cursor-pointer grid-item-fade";
        card.className = cardClass;
        
        // Calculate row based on screen size (4 cols xl, 3 cols lg, 2 cols sm, 1 col mobile)
        // Use a simplified approach: estimate 4 columns for desktop
        const itemsPerRow = 4;
        const row = Math.floor(displayIndex / itemsPerRow);
        card.style.animationDelay = `${row * 0.1}s`;
        
        // Determine tech color based on stack
        const firstTech = project.stack[0] || '';
        let techColor = 'text-[#F4BF80]';
        if (firstTech.toLowerCase().includes('python')) techColor = 'text-emerald-400';
        else if (firstTech.toLowerCase().includes('unity') || firstTech.toLowerCase().includes('c#')) techColor = 'text-blue-400';
        else if (firstTech.toLowerCase().includes('html') || firstTech.toLowerCase().includes('css') || firstTech.toLowerCase().includes('javascript')) techColor = 'text-orange-400';
        else if (firstTech.toLowerCase().includes('react')) techColor = 'text-cyan-400';
        else if (firstTech.toLowerCase().includes('swift')) techColor = 'text-purple-400';
        
        const firstImage = project.splash_image;//Array.isArray(project.splash_image) ? project.images[0] : project.images;
        console.log("firstImage: ", firstImage)
        // If this project's title exists in `externalLinks`, open that URL instead
        const href = externalLinks[project.title] || `project.html?id=${originalIndex}`;
        const anchorExtra = href.startsWith('http') ? ' target="_blank" rel="noopener noreferrer"' : '';

        // Build the card with conditional status overlay
        if (hasStatus) {
          // Status card: greyscale image with overlay text
          card.innerHTML = `
            <div class="block pointer-events-none">
              <div class="aspect-video w-full overflow-hidden bg-zinc-900 relative">
                 <img src="${firstImage}" alt="${project.title} screenshot" loading="lazy" decoding="async" class="h-full w-full object-cover" style="filter: grayscale(100%) brightness(0.4);"/>
                 <div class="absolute inset-0 bg-gradient-to-br from-[#0b0d10]/60 via-transparent to-[#0b0d10]/60"></div>
                 <div class="absolute inset-0 flex items-center justify-center">
                   <div class="text-center">
                     <i data-lucide="clock" class="h-8 w-8 text-slate-300 mx-auto mb-2"></i>
                     <p class="text-sm font-semibold text-slate-200 uppercase tracking-wider">${project.status}</p>
                   </div>
                 </div>
              </div>
              <div class="p-4">
                <div class="flex items-center justify-between mb-2">
                   <span class="text-[10px] font-bold uppercase tracking-wider text-slate-600">${project.stack[0] || 'TBA'}</span>
                </div>
                <h3 class="text-sm font-semibold text-slate-600 truncate">${project.title}</h3>
                <p class="mt-1 text-xs text-slate-700 line-clamp-1">${project.subtitle}</p>
              </div>
            </div>
          `;
        } else {
          // Normal project card
          card.innerHTML = `
            <a href="${href}"${anchorExtra} class="block">
              <div class="aspect-video w-full overflow-hidden bg-zinc-900">
                 <img src="${firstImage}" alt="${project.title} screenshot" loading="lazy" decoding="async" class="h-full w-full object-cover opacity-70 group-hover:opacity-100 group-hover:scale-105 transition duration-500"/>
              </div>
              <div class="p-4">
                <div class="flex items-center justify-between mb-2">
                   <span class="text-[10px] font-bold uppercase tracking-wider ${techColor}">${project.stack[0]}</span>
                </div>
                <h3 class="text-sm font-semibold text-white group-hover:text-white transition-colors truncate">${project.title}</h3>
                <p class="mt-1 text-xs text-slate-500 line-clamp-1">${project.subtitle}</p>
              </div>
            </a>
          `;
        }
        return card;
      }

      // Fetch and render projects from projects.json based on publicProjects array
      async function loadProjects() {
        try {
          const response = await fetch(`data/projects.json?v=${Date.now()}`);
          const projects = await response.json();
          
          // Render main projects grid
          const grid = document.getElementById('all-projects-grid');
          
          // Filter and order projects based on publicProjects array
          // Keep the original index from projects.json so links point to the correct item
          const displayProjects = publicProjects
            .map(title => {
              const idx = projects.findIndex(p => p.title === title);
              return idx !== -1 ? { project: projects[idx], originalIndex: idx } : null;
            })
            .filter(p => p !== null); // Remove any titles that don't match

          displayProjects.forEach(({ project, originalIndex }, displayIndex) => {
            const card = createProjectCard(project, originalIndex, displayIndex);
            grid.appendChild(card);
          });
          
          // Render labs grid
          const labsGrid = document.getElementById('labs-grid');
          
          // Filter and order projects based on labProjects array
          const displayLabProjects = labProjects
            .map(title => {
              const idx = projects.findIndex(p => p.title === title);
              return idx !== -1 ? { project: projects[idx], originalIndex: idx } : null;
            })
            .filter(p => p !== null);

          displayLabProjects.forEach(({ project, originalIndex }, displayIndex) => {
            const card = createProjectCard(project, originalIndex, displayIndex);
            labsGrid.appendChild(card);
          });
          
          // Update project count in header (total of both sections)
          const totalCount = displayProjects.length + displayLabProjects.length;
          document.querySelector('.text-slate-500').textContent = `${totalCount} items`;
          
          lucide.createIcons();
        } catch (error) {
          console.error('Error loading projects.json:', error);
        }
      }

      // Load projects on page load
      window.addEventListener('load', loadProjects);
    </script>
  
  </body>
</html>
